# Alkyl Language Specification and Design

generated by ai

Alkyl is a statically typed, compiled programming language that blends C-style syntax with modern features like namespaces, classes (with traits), string handling, and macro definitions. It compiles to LLVM IR.

## 1. Basics

### Comments

Alkyl supports C-style comments.

```alkyl
// This is a single-line comment
/* This is a 
   multi-line comment */
```

### Data Types

Alkyl supports several primitive types and pointers.

| **Type Keyword** | **Description** |
| :--- | :--- |
| `int` | 32-bit Integer |
| `char` | 8-bit Character |
| `bool` | Boolean (`true`/`false`) |
| `single` | Single-precision floating point (float) |
| `double` | Double-precision floating point |
| `string` | String type (managed `char*`) |
| `void` | Empty type |
| `let` / `auto` | Type inference |

### Variables

Variables can be mutable or immutable.

**Syntax:**

```alkyl
// Explicit typing
int x = 10;
string name = "Alkyl";

// Type inference (requires initializer)
let y = 20.5; 

// Mutability qualifiers
mut int count = 0;   // Mutable
imut int id = 123;   // Immutable (default behavior typically depends on context, Alkyl treats default declarations as mutable in some contexts but provides keywords for clarity)

// Pointers
// Rarely used for standard programming langauge, unless used for low-level programming
int* ptr = null;
```

### Arrays

Arrays can be declared with fixed sizes.

```alkyl
int numbers[5];           // Uninitialized array of size 5
int arr[] = [1, 2, 3];    // Array literal, size inferred
```

## 2. Control Flow

### If-Else

```alkyl
// Alkyl permits no brace after if
if x > 10 {
    print "Greater";
} elif (x == 10) {
    print("Equal");
} else {
    print("Lesser");
}
```

### Loops

**Standard While:**

```alkyl
while x > 0 {
    x--;
}
```

**Do-While (While Once):**

```alkyl
while once x > 0 {
    // Executes at least once
    x--;
}
```

**Loop:**

```alkyl
// TODO make this more approriate
loop 5 {
    print "Five times!";
}
```

## 3. Functions

Functions are defined with a return type, name, and parameter list. Alkyl supports function overloading.

```alkyl
int add(int a, int b) {
    return a + b;
}

// Overloading
double add(double a, double b) {
    return a + b;
}

void main() {
    print(add(1, 2));
}
```

## 4. Object-Oriented Programming

Alkyl uses a class-based system with single inheritance and traits (mixins).

### Classes

```alkyl
open class Vector {
    int x;
    int y;

    // Constructor-like logic is often handled via manual init or factory methods currently,
    // though the parser allows methods inside classes.
    void print_vec() {
        printf("Vec: %d, %d", this.x, this.y);
    }
}
```

### Inheritance (`is`)

```alkyl
class Entity {
    int id;
}

class Player is Entity {
    string name;
}
```

### Traits (`has`)

Traits act as interfaces or mixins.

```alkyl
class Printable {
    void print_self() { ... }
}

class User has Printable {
    // User now has print_self
}
```

### Visibility

* `open`: Public members.
* `closed`: Private members.

## 5. Metaprogramming & Macros

### Macros (`define`)

Alkyl supports token-replacement macros.

```alkyl
define PI as 3.14159;
define MAX(a, b) as ((a > b) ? a : b);

// Comma-separated definitions
define foo, bar as 100; // foo and bar both expand to 100
```

### Type Aliasing (`typedef`)

```alkyl
typedef Integer as int;
typedef StringArray as string[];
```

## 6. Namespaces & Enums

### Namespaces

Organize code into logical blocks.

```alkyl
namespace Math {
    int add(int a, int b) { return a + b; }
}

// Access
Math.add(1, 2); // (Current implementation usually flattens names or requires specific mangling lookup)
```

### Enums

```alkyl
enum Color {
    Red,
    Green = 10,
    Blue
}
```

## 7. Modular Programming & FFI

### Import

Includes source files directly.

```alkyl
import "std/math.aky";
```

### Extern (FFI)

Declare functions implemented in C or linked libraries.

```alkyl
extern int printf(string fmt, ...);
```

### Link

Link against system libraries.

```alkyl
link "m"; // Links libm
```

## 8. Built-in Features

Alkyl provides several intrinsics and helper functions:

* **`print(arg)`**: Generic printer.
* **`printf(fmt, ...)`**: C-style formatted print.
* **`input()`**: Reads a string from stdin.
* **`malloc(size)` / `free(ptr)`**: Manual memory management.
* **`typeof(expr)`**: Returns the type name as a string at runtime/compile-time.
* **String Operators**:
    * `+`: String concatenation.
    * `==` / `!=`: String content comparison.

```alkyl
string s1 = "Hello";
string s2 = " World";
string s3 = s1 + s2; // "Hello World"
```

## 9. Error Handling

Alkyl compiler provides "Did you mean?" suggestions for typos in keywords, variable names, and function names using Levenshtein distance calculations.

